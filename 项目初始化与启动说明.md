# 项目初始化与启动说明

## 1. 删除旧数据库

如果你使用的是 SQLite，直接删除数据库文件即可。例如：

```
# Windows 下命令行
# 假设数据库文件名为 data-dev.sqlite 或 movies.db

del data-dev.sqlite
# 或
# del movies.db
```

如果你使用 MySQL，请登录数据库后执行：

```
DROP DATABASE 数据库名;
CREATE DATABASE 数据库名 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

---

## 2. 安装依赖

确保你已安装好 Python 及 pip，然后在项目根目录下执行：

```
pip install -r requirements.txt
```

---

## 3. 初始化数据库（迁移）

### 第一次使用时：

```
# 初始化迁移环境
flask db init

# 生成迁移脚本
flask db migrate -m "init"

# 应用迁移，创建表结构
flask db upgrade
```

如果已经有 migrations 文件夹，只需执行 migrate 和 upgrade。

---

## 4. 导入数据（可选）

如果你有 Excel 数据需要导入数据库，可以编写一个脚本（如 import_movies.py）批量导入。

---

## 5. 启动项目

```
# 推荐用 Flask 命令
flask run

# 或者直接运行
python run.py
```

访问 http://127.0.0.1:5000 即可。

---

## 6. 常见问题

- 如果报错找不到表，确认是否执行了 `flask db upgrade`。
- 如果模型字段有变动，需重新执行 `flask db migrate` 和 `flask db upgrade`。
- 如果端口被占用，可用 `flask run -p 8000` 指定端口。

---

## 7. 参考命令速查

```
# 删除 SQLite 数据库
rm data-dev.sqlite  # Linux/macOS
# del data-dev.sqlite  # Windows

# 初始化迁移
flask db init
# 生成迁移脚本
flask db migrate -m "init"
# 应用迁移
flask db upgrade
# 启动服务
flask run
```

---

如有问题请联系开发者或查阅 README 文档。 